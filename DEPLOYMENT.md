# Deployment Guide - AI Content Creator

## Quick Reference

### Prerequisites
- GitHub account
- Render account (free tier)
- MongoDB Atlas account (free tier)
- Google Gemini API key

---

## Step-by-Step Deployment Process

### Phase 1: MongoDB Atlas Setup

1. **Create MongoDB Atlas Account**
   - Visit [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
   - Sign up for free tier (M0)

2. **Create a Cluster**
   - Click "Build a Database"
   - Choose FREE tier (M0)
   - Select region closest to you
   - Click "Create Cluster"

3. **Create Database User**
   - Go to Database Access â†’ Add New Database User
   - Choose Password authentication
   - Username: `aicontentuser` (or your choice)
   - Password: Generate strong password and save it securely
   - Grant "Read and write to any database" privileges

4. **Configure Network Access**
   - Go to Network Access â†’ Add IP Address
   - Click "Allow Access from Anywhere" (0.0.0.0/0)
   - Required for Render to connect

5. **Get Connection String**
   - Go to Database â†’ Connect â†’ Connect Your Application
   - Copy connection string: `mongodb+srv://username:<password>@cluster.xxxxx.mongodb.net/`
   - Replace `<password>` with your actual password
   - Add database name: `mongodb+srv://username:password@cluster.xxxxx.mongodb.net/ai_content_creator`

---

### Phase 2: GitHub Repository Setup

1. **Initialize Git Repository** (in your project root):
   ```powershell
   git init
   git add .
   git commit -m "Initial commit: AI Content Creator with glassmorphism UI"
   ```

2. **Create GitHub Repository**
   - Go to [GitHub](https://github.com/new)
   - Create new repository (public or private)
   - Don't initialize with README (you already have files)

3. **Push to GitHub**:
   ```powershell
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   git branch -M main
   git push -u origin main
   ```

---

### Phase 3: Backend Deployment on Render

1. **Sign in to Render**
   - Visit [Render Dashboard](https://dashboard.render.com/)
   - Sign up/login with GitHub

2. **Deploy Backend Using Blueprint**
   - Click "New" â†’ "Blueprint"
   - Connect your GitHub repository
   - Render will detect `render.yaml` automatically
   - Click "Apply"

3. **Configure Backend Environment Variables**
   
   Render will prompt you to set these values:

   | Variable | Value |
   |----------|-------|
   | `MONGO_URI` | Your MongoDB Atlas connection string |
   | `GEMINI_API_KEY` | `AIzaSyAsKPIpiEg_Gpmbt9QiGhFJYelhfo_ygn0` |
   | `FRONTEND_URL` | Leave blank for now (add after frontend deployed) |
   | `JWT_SECRET` | Auto-generated by Render |

4. **Wait for Backend Deployment**
   - Deployment takes 3-5 minutes
   - Watch logs for "MongoDB connected successfully"
   - Copy backend URL: `https://ai-content-backend-xxxx.onrender.com`

---

### Phase 4: Frontend Deployment on Render

1. **Frontend Service Configuration**
   - Already configured in `render.yaml`
   - Render deploys it automatically with backend

2. **Set Frontend Environment Variable**
   - Go to frontend service settings
   - Add environment variable:
     - Key: `VITE_API_URL`
     - Value: `https://ai-content-backend-xxxx.onrender.com/api` (your backend URL)

3. **Trigger Redeploy**
   - Click "Manual Deploy" â†’ "Deploy latest commit"
   - Wait 2-3 minutes for build
   - Copy frontend URL: `https://ai-content-frontend-xxxx.onrender.com`

---

### Phase 5: Connect Frontend and Backend

1. **Update Backend FRONTEND_URL**
   - Go to backend service â†’ Environment
   - Add/Update `FRONTEND_URL` variable:
     - Value: `https://ai-content-frontend-xxxx.onrender.com` (your frontend URL)
   - Backend will auto-redeploy

2. **Verify CORS Configuration**
   - CORS is pre-configured in `backend/src/app.js`
   - Allows: localhost (dev) + your production frontend URL

---

### Phase 6: Testing & Verification

1. **Test Backend Health Check**
   - Visit: `https://ai-content-backend-xxxx.onrender.com/api/health`
   - Should return: `{"status":"ok","timestamp":"..."}`

2. **Test Frontend**
   - Visit: `https://ai-content-frontend-xxxx.onrender.com`
   - Click "Register" â†’ Create account
   - Test content generation with different categories

3. **Check Logs for Errors**
   - Render Dashboard â†’ Select Service â†’ Logs tab
   - Look for connection errors or API failures

---

### Phase 7: Production URLs

After deployment, update these in your notes:

- **Frontend URL**: `https://ai-content-frontend-xxxx.onrender.com`
- **Backend URL**: `https://ai-content-backend-xxxx.onrender.com`
- **Health Check**: `https://ai-content-backend-xxxx.onrender.com/api/health`

---

## Important Notes

### Free Tier Limitations
- **Render Free Tier**: Services spin down after 15 minutes of inactivity
- **First request**: May take 30-50 seconds to wake up (cold start)
- **MongoDB Atlas Free Tier**: 512MB storage limit

### Security Best Practices
- âœ… `.env` files are git-ignored (API keys safe)
- âœ… JWT secrets auto-generated by Render
- âœ… CORS configured for specific origins only
- âœ… Rate limiting enabled (100 requests per 15 minutes)

### Environment Variables Summary

**Backend** (set in Render):
- `MONGO_URI` - MongoDB Atlas connection string
- `JWT_SECRET` - Auto-generated by Render
- `GEMINI_API_KEY` - Your Google Gemini API key
- `FRONTEND_URL` - Your deployed frontend URL
- `NODE_ENV` - Set to `production` (auto)
- `PORT` - Set to `5000` (auto)

**Frontend** (set in Render):
- `VITE_API_URL` - Your deployed backend URL + `/api`

---

## Troubleshooting

### Backend Won't Start
- Check MongoDB Atlas connection string format
- Verify IP whitelist includes 0.0.0.0/0
- Check Render logs for specific error

### Frontend Can't Connect to Backend
- Verify `VITE_API_URL` in frontend env vars
- Verify `FRONTEND_URL` in backend env vars
- Check CORS errors in browser console

### Cold Start Issues
- First request after inactivity takes 30-50 seconds
- This is normal for Render free tier
- Consider upgrading to paid tier for always-on service

---

## Support Resources

- **Render Docs**: https://render.com/docs
- **MongoDB Atlas Docs**: https://docs.atlas.mongodb.com/
- **Google Gemini API**: https://ai.google.dev/tutorials

---

## Post-Deployment Checklist

- [ ] MongoDB Atlas cluster created and configured
- [ ] GitHub repository created and code pushed
- [ ] Render Blueprint deployed both services
- [ ] Backend environment variables configured
- [ ] Frontend environment variable configured
- [ ] Backend health check returns 200 OK
- [ ] Frontend loads and displays UI correctly
- [ ] User registration works
- [ ] User login works
- [ ] Content generation works for all categories
- [ ] Content history displays correctly
- [ ] Copy/Save buttons work

---

**Congratulations!** ðŸŽ‰ Your AI Content Creator is now live!
